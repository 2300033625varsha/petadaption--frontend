server {
    listen 80;
    server_name _; # Listens for any hostname

    # Set the root directory for your application's build files
    root /usr/share/nginx/html;
    index index.html;

    # This block handles page routing and requests for static assets
    location / {
        # 1. Tries to find the exact file requested (e.g., /assets/main.js)
        # 2. If it's a directory, it tries that (e.g., /admin/)
        # 3. If neither is found, it serves index.html for client-side routing
        try_files $uri $uri/ /index.html;
    }

    # Optional: Set longer cache times for static assets to improve performance
    # This block is now handled by the `location /` block above, but if you want
    # specific caching rules, you can use it like this.
    location ~* \.(?:css|js|png|jpg|jpeg|gif|svg|ico|woff2?|ttf|eot)$ {
        expires 7d;
        add_header Cache-Control "public";
        # We don't need `try_files` here because the main location block already handles fallbacks.
        # If a file isn't found, it will correctly 404.
    }
}